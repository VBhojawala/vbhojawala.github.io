---
title: Warnings
layout: tutorial
tags: []
sidebar: python_sidebar
permalink: python_warnings.html
folder: python
prev_section: 
prev_section_title: 
prev: python_traceback.html
prev_title: Traceback
next: 
next_title: 
next_section: 
next_section_title: 
summary: 
---

## Warnings

<p> Warning message is issued when program is behaving abnormally but not at the level of raising exception such as use of deprecated module.</p>

<div id="tut-content"> 
    <ul>
        <li> Warning messages are written to std.err, but it can be changed to ignore it or turning it in to Exception. </li>
    </ul> 
</div>


### Warning Class hierarchy

<div id="tut-img">
    <img src="/images/tutorials/python/WarningClassHierarchy.gif" class="tut-img" alt="python logo">
</div>


<div id="tut-content"> 
    <ul>    
        <li> <strong> UserWarning  : </strong> Base class for all warnings generated by user code. </li>
        <li> <strong> DeprecationWarning : </strong> Base class for warnings about deprecated features intended for python developers. </li>
        <li> <strong> PendingDeprecationWarning : </strong> Base class for warnings about features which are obsolete and expected to be deprecated in the future, but are not deprecated at the moment. </li>
        <li> <strong> SyntaxWarning : </strong> Base class for warnings about incorrect syntax. </li>
        <li> <strong> RuntimeWarning : </strong> Base class for warnings about unexpected runtime behavior. </li>
        <li> <strong> ImportWarning : </strong> Base class for warnings about probable mistakes in module imports.</li>
        <li> <strong> UnicodeWarning : </strong> Base class for warnings related to Unicode.</li>
        <li> <strong> BytesWarning : </strong> Base class for warnings related to bytes and bytearray. </li>
        <li> <strong> ResourceWarning : </strong> Base class for warnings related to resource usage. Ignored by the default warning filters. </li>
        <li> <strong> FutureWarning : </strong> Base class for warnings about deprecated features intended for end users of an application. </li>
    </ul>
</div>


### Raising warning

#### warn(message, category=None, stacklevel=1, source=None)

<p> Issues the warning with given parameters. </p>

<div id="tut-content"> 
    <ul>
        <li> <strong> message : </strong> str containing warning message or warning instance. </li>
        <li> <strong> category : </strong> If given must be subclass of Warning, by default it's UserWarning. </li>
        <li> <strong> stacklevel : </strong> determines origin of warning message. </li>
        <li> <strong> source : </strong>  If given, it's a destroyed object which emitted a ResourceWarning. </li>
    </ul> 
</div>


<hr/>


<p> <i class="fa fa-file-text" aria-hidden="true"></i> UserAuth.py </p>

{% assign code_block = code_block | plus: 1 %}
{% assign code_block_id = "code-block-" | append: code_block %}
{% assign code_header_id = "code-header-" | append: code_block %}
<div id="{{ code_block_id }}" class="code-block">
<p id= "{{ code_header_id }}" class="code-header" data-toggle="tooltip" data-original-title="Copy to ClipBoard"><b>Copy</b></p><script type="text/javascript">copyHover("{{ code_block_id }}", "{{ code_header_id }}")</script>
{% highlight python %}

import warnings


def user_auth(user):
    warnings.warn('Deprecated auth protocol', UserWarning, stacklevel=2)


{% endhighlight %}
</div>


<hr/>

<p> <i class="fa fa-file-text" aria-hidden="true"></i> AuthClient.py </p>

{% assign code_block = code_block | plus: 1 %}
{% assign code_block_id = "code-block-" | append: code_block %}
{% assign code_header_id = "code-header-" | append: code_block %}
<div id="{{ code_block_id }}" class="code-block">
<p id= "{{ code_header_id }}" class="code-header" data-toggle="tooltip" data-original-title="Copy to ClipBoard"><b>Copy</b></p><script type="text/javascript">copyHover("{{ code_block_id }}", "{{ code_header_id }}")</script>
{% highlight python %}

import UserAuth

UserAuth.user_auth('admin')


{% endhighlight %}
</div>





<div class="result"><p class="result-header"><b>Output</b></p>
<pre id='tut-output-error' class="result-content">/home/asha/PycharmProjects/pythonEx/05_ExceptionHandling/progs/AuthClient.py:3: UserWarning: Deprecated auth protocol
  UserAuth.user_auth('admin')</pre></div>


<div id="tut-content"> 
    <ul>
        <li> calling user_auth() function from AuthClient.py without stacklevel will point file UerAuth.py in warning with stacklevel defined it will point to AuthClient.py where actual function call is made. </li>
        <li> In above example stack level raises warning from where the user_auth call is made, rather than raising from the function itself. </li>
    </ul> 
</div>

<hr/>


### Warnings Filter

<p> The warnings filter determines whether warnings are ignored, displayed, or turned into errors. </p>

<p> Format of warning filter  : </p>
<p id="tut-cons"> action:message:category:module:line </p>


#### action

 value    |      Disposition
 :--- | :----
 'default'  |  prints first occurrences of matching warning message for each location (module + lineno)
 'error'    |  turns matching warning into exception
 'ignore'   |  no print for matching warnings
 'always'   |  always prints matching warning
 'module'   |  print first occurrences of matching warning message for each module
 'once'     |  prints first occurrence of matching warnings, regardless of location

<br/>

<p> <strong> Syntax :  </strong>  python -W &lt;action> my_prog.py</p>
<p> <strong> example :  </strong> python -W error my_prog.py</p> 


<p> <i class="fa fa-file-text" aria-hidden="true"></i> WarningError.py </p>

{% assign code_block = code_block | plus: 1 %}
{% assign code_block_id = "code-block-" | append: code_block %}
{% assign code_header_id = "code-header-" | append: code_block %}
<div id="{{ code_block_id }}" class="code-block">
<p id= "{{ code_header_id }}" class="code-header" data-toggle="tooltip" data-original-title="Copy to ClipBoard"><b>Copy</b></p><script type="text/javascript">copyHover("{{ code_block_id }}", "{{ code_header_id }}")</script>
{% highlight python %}

from warnings import warn

warn('Warning!')

print('After Warning')



{% endhighlight %}
</div>

<br/>

<div class="result"><p class="result-header"><b>Terminal Execution</b></p>
<pre class="result-content">
(venv) [asha@Tutorials progs]$ <div id="tut-highlight">python -W error WarningError.py</div>
Traceback (most recent call last):
  File "WarningError.py", line 3, in &lt;module>
    warn('Warning!')
UserWarning: Warning!

</pre></div>

<br/>


<div class="result"><p class="result-header"><b>Terminal Execution</b></p>
<pre class="result-content">
(venv) [asha@Tutorials progs]$ <div id="tut-highlight">python -W default WarningError.py </div>
WarningError.py:3: UserWarning: Warning!
  warn('Warning!')
After Warning
</pre></div>

<br/>


<div class="result"><p class="result-header"><b>Terminal Execution</b></p>
<pre class="result-content">
(venv) [asha@Tutorials progs]$ <div id="tut-highlight">python -W ignore WarningError.py </div>
After Warning
</pre></div>


<hr/>


<div id="tut-content"> 
    <ul>
        <li> Same can be achieved using PYTHONWARNINGS environment variable </li>
    </ul> 
</div>


<br/>


<div class="result"><p class="result-header"><b>Terminal Execution</b></p>
<pre class="result-content">
(venv) [asha@Tutorials progs]$ <div id="tut-highlight">export PYTHONWARNINGS="error"</div>
(venv) [asha@Tutorials progs]$ python WarningError.py
Traceback (most recent call last):
  File "WarningError.py", line 3, in &lt;module>
    warn('Warning!')
UserWarning: Warning!

</pre></div>


<br/>


<div class="result"><p class="result-header"><b>Terminal Execution</b></p>
<pre class="result-content">
(venv) [asha@Tutorials progs]$ <div id="tut-highlight">export PYTHONWARNINGS="default"</div>
(venv) [asha@Tutorials progs]$ python WarningError.py
WarningError.py:3: UserWarning: Warning!
  warn('Warning!')
After Warning
</pre></div>



<br/>


<div class="result"><p class="result-header"><b>Terminal Execution</b></p>
<pre class="result-content">
(venv) [asha@Tutorials progs]$ <div id="tut-highlight">export PYTHONWARNINGS="ignore"</div>
(venv) [asha@Tutorials progs]$ python WarningError.py
After Warning
</pre></div>

<hr/>

<div id="tut-content"> 
    <ul>
        <li> PYTHONWARNINGS can also be set as following which will affect current process and it's sub process : </li>
    </ul> 
</div>


{% assign code_block = code_block | plus: 1 %}
{% assign code_block_id = "code-block-" | append: code_block %}
{% assign code_header_id = "code-header-" | append: code_block %}
<div id="{{ code_block_id }}" class="code-block">
<p id= "{{ code_header_id }}" class="code-header" data-toggle="tooltip" data-original-title="Copy to ClipBoard"><b>Copy</b></p><script type="text/javascript">copyHover("{{ code_block_id }}", "{{ code_header_id }}")</script>
{% highlight python %}

import os
os.environ["PYTHONWARNINGS"] = 'ignore'


{% endhighlight %}
</div>


<div id="tut-content"> 
    <ul>
        <li> <strong> message : </strong> A string containing regular expression for matching warning message. Match is performed in case insensitive manner. </li>
        <li> <strong> category : </strong> Warning base Class of which all subclasses are allowed. </li>
        <li> <strong> module : </strong> String containing regular expression that module name must match. </li>
        <li> <strong> lineno : </strong> int indicates line number at which warning is raised. </li>
    </ul> 
</div>


<hr/>

<p> Format of warning filter  : </p>
<p id="tut-cons"> action:message:category:module:line </p>


#### Default Warning filter of Python



<div id="tut-content"> 
    <ol>
        <li> <strong> default::DeprecationWarning:__main__ </strong> </li>
        <li> <strong> ignore::DeprecationWarning </strong> </li>
        <li> <strong> ignore::PendingDeprecationWarning </strong> </li>
        <li> <strong> ignore::ImportWarning </strong> </li>
        <li> <strong> ignore::ResourceWarning</strong> </li>
    </ol> 
</div>


#### Examples

<div id="tut-content"> 
    <ul>
        <li> <strong> error::ResourceWarning </strong> : converts ResourceWarning and it's subclass in to error.</li>
        <li> <strong> ignore,default:::authmodule </strong> : ignore action for all warning, default action for authmodule Module. </li>
        <li> <strong> ignore,default:::userauth[.*] </strong> : ignore action for all warning, default action for userauth Module and any subpackages of userauth. </li>
    </ul> 
</div>

<hr/>

<div id="tut-content"> 
    <ul>
        <li> <strong> Example </strong> </li>
    </ul> 
</div>

<p> <i class="fa fa-file-text" aria-hidden="true"></i> MultipleWarningFilter.py </p>

{% assign code_block = code_block | plus: 1 %}
{% assign code_block_id = "code-block-" | append: code_block %}
{% assign code_header_id = "code-header-" | append: code_block %}
<div id="{{ code_block_id }}" class="code-block">
<p id= "{{ code_header_id }}" class="code-header" data-toggle="tooltip" data-original-title="Copy to ClipBoard"><b>Copy</b></p><script type="text/javascript">copyHover("{{ code_block_id }}", "{{ code_header_id }}")</script>
{% highlight python %}

from warnings import warn
from traceback import print_exc

try:
    warn('UserWarning!', category=UserWarning)
except UserWarning:
    print_exc()

try:
    warn('DeprecationWarning!', category=DeprecationWarning)
except DeprecationWarning:
    print_exc()

try:
    warn('ResourceWarning!', category=ResourceWarning)
except ResourceWarning:
    print_exc()



{% endhighlight %}
</div>

<div class="result"><p class="result-header"><b>Terminal Execution</b></p>
<pre class="result-content">
(venv) [asha@Tutorials progs]$ <div id="tut-highlight">python MultipleWarningFilter.py </div>
MultipleWarningFilter.py:5: UserWarning: UserWarning!
  warn('UserWarning!', category=UserWarning)
MultipleWarningFilter.py:10: DeprecationWarning: DeprecationWarning!
  warn('DeprecationWarning!', category=DeprecationWarning)
</pre></div>


<div id="tut-content"> 
    <ul>
        <li> It will show UserWarning as not filter is assigned handled by 'default' action. </li>
        <li> It will show DeprecationWarning as it's run as __main__. </li>
        <li>  It will ignore ResourceWarning as it is configured in filter to ignore ResourceWarning. </li>
    </ul> 
</div>

<br/>


<div class="result"><p class="result-header"><b>Terminal Execution</b></p>
<pre class="result-content">
(venv) [asha@Tutorials progs]$ <div id="tut-highlight">python -W"error::ResourceWarning" -W"ignore::DeprecationWarning:__main__" MultipleWarningFilter.py</div>
MultipleWarningFilter.py:5: UserWarning: UserWarning!
  warn('UserWarning!', category=UserWarning)
Traceback (most recent call last):
  File "MultipleWarningFilter.py", line 15, in &lt;module>
    warn('ResourceWarning!', category=ResourceWarning)
ResourceWarning: ResourceWarning!

</pre></div>


<div id="tut-content"> 
    <ul>
        <li> Show UserWarning as no filter is assigned handled by 'default' action. </li>
        <li> It will convert ResourceWarning into error. </li>
        <li> Ignore DeprecationWarning from __main__. </li>
    </ul> 
</div>


<hr/>




### Warning Filter

#### filterwarnings(action, message='', category=Warning, module='', lineno=0, append=False)

<p> Adds an entry to the front of the list of warning filters specification.</p>

<div id="tut-content"> 
    <ul>
        <li> When matching filter message starts from front and searches through list until match is found. If no match is found it uses 'default' action, else first matching filter from the front. </li>
        <li> It only affects current process only. </li>
    </ul> 
</div>


<div id="tut-content"> 
    <ul>
        <li> <strong> append : </strong> If given True, entry is appended at the end od the list. </li>
    </ul> 
</div>


{% assign code_block = code_block | plus: 1 %}
{% assign code_block_id = "code-block-" | append: code_block %}
{% assign code_header_id = "code-header-" | append: code_block %}
<div id="{{ code_block_id }}" class="code-block">
<p id= "{{ code_header_id }}" class="code-header" data-toggle="tooltip" data-original-title="Copy to ClipBoard"><b>Copy</b></p><script type="text/javascript">copyHover("{{ code_block_id }}", "{{ code_header_id }}")</script>
{% highlight python %}

from warnings import warn,filterwarnings
from traceback import print_exc

filterwarnings('error', category=ResourceWarning)
filterwarnings('ignore', category=DeprecationWarning, module='__main__')

try:
    warn('UserWarning!', category=UserWarning)
except UserWarning:
    print_exc()

try:
    warn('DeprecationWarning!', category=DeprecationWarning)
except DeprecationWarning:
    print_exc()

try:
    warn('ResourceWarning!', category=ResourceWarning)
except ResourceWarning:
    print_exc()



{% endhighlight %}
</div>

<div class="result"><p class="result-header"><b>Output</b></p>
<pre id='tut-output-error' class="result-content">UserWarning: UserWarning!
  warn('UserWarning!', category=UserWarning)
Traceback (most recent call last):
  File "/home/asha/PycharmProjects/pythonEx/05_ExceptionHandling/progs/MultipleWarningFilter2.py", line 18, in &lt;module>
    warn('ResourceWarning!', category=ResourceWarning)
ResourceWarning: ResourceWarning!</pre></div>

<hr/>


### User defined Warning Class

{% assign code_block = code_block | plus: 1 %}
{% assign code_block_id = "code-block-" | append: code_block %}
{% assign code_header_id = "code-header-" | append: code_block %}
<div id="{{ code_block_id }}" class="code-block">
<p id= "{{ code_header_id }}" class="code-header" data-toggle="tooltip" data-original-title="Copy to ClipBoard"><b>Copy</b></p><script type="text/javascript">copyHover("{{ code_block_id }}", "{{ code_header_id }}")</script>
{% highlight python %}

from warnings import filterwarnings, warn


class ZeroDivisionWarning (UserWarning):
    pass


filterwarnings('default', category=UserWarning)

try:
    result = 1 / 0
except ZeroDivisionError as e:
    warn('Illegal operation , division by zero was attempted. result is set to zero',
         category=ZeroDivisionWarning)
    result = 0

print('Statements after ......')


{% endhighlight %}
</div>

<div class="result"><p class="result-header"><b>Output</b></p>
<pre id='tut-output-error' class="result-content">ZeroDivisionWarning: Illegal operation , division by zero was attempted. result is set to zero
  warn('Illegal operation , division by zero was attempted. result is set to zero',

</pre>
<pre class="result-content">
Statements after ......
</pre></div>

<hr/>


### Functions

#### formatwarning(message, category, filename, lineno, line=None)

<p> Formats warning message and return formatted message in str.</p>



{% include links.html %}